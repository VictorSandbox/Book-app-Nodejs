<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head.ejs'); %>
  </head>
  <body class="container">
    <header>
      <%- include('../partials/header.ejs'); %>
    </header>

    <main>
      <div class="container">
        <h2 class="display-5">Book Details</h2>
        <%- include('../partials/errorMessage.ejs') %>
        <form
          class="form-group"
          action="/books/add-book"
          method="POST"
          enctype="multipart/form-data"
        >
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="name">Title</label>
              <input type="text" class="form-control" name="title" />
            </div>

            <div class="form-group col-md-6">
              <label for="name">Author</label>
              <select name="author" class="form-control">
                <% authors.forEach(author => { %> <% if (author.id ==
                book.author) { %>
                <option
                  selected
                  label="<%= author.name %>"
                  value="<%= author.id %>"
                ></option>
                <% } else { %>
                <option
                  label="<%= author.name %>"
                  value="<%= author.id %>"
                ></option>
                <% } %> <% }) %>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="name">Publish Date</label>
              <input
                type="date"
                name="publishDate"
                value="<%= book.publishDate == null ? '' : book.publishDate.toISOString().split('T')[0] %>"
                class="form-control"
              />
            </div>

            <div class="form-group col-md-6">
              <label for="name">Page Count</label>
              <input
                type="number"
                name="pageCount"
                min="1"
                value="<%= book.pageCount %>"
                class="form-control"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="name">Cover</label>
              <input type="file" name="cover" class="form-control" />
            </div>
            <div class="form-group col-md-6">
              <label for="name">Description</label>
              <textarea
                name="description"
                class="form-control mb-4"
                id=""
                cols="30"
                rows="10"
              >
<%= book.description %></textarea
              >
            </div>
          </div>


          <div class="form-group"> 
            <input type="submit" value="Find" class="btn btn-primary" />
            <a href="/"  role="button" class="btn btn-success ">Cancel</a>
          </div>
        </form>
        <!-- <% authors.forEach(author => { %> <%= author.name %> <% }) %> -->
      </div>
    </main>

    <footer>
      <%- include('../partials/footer.ejs'); %>
    </footer>
  </body>
</html>
